<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zonaUsuarios</title>
    <link rel="stylesheet" href="estilos.css" />
    <script>
		function llamada(){
			fetch('listarusuarios')
			.then(response => response.json())
			.then(data => pintarResultados(data));
		}
		
		function borrar(id){
			if(confirm("¿Seguro que quieres borrar?")){
			fetch('borrar?id='+id)
			.then(response => llamada())
			}else{
				
			}
		}
		
		function pintarResultados(datos) {
			
			let html = "<table border=1>";
				html += "<tr><td>Nombre</td><td>Contraseña</td><td>Email</td><td>Permiso</td></tr>";
				
		    for(var i=0;i<datos.length;i++){
				html += "<tr><td>"+datos[i].usuario+"</td><td>"+datos[i].contrasenia+"</td><td>"+datos[i].email+"</td><td>"+datos[i].permiso+"</td><td><a href='editarUsuario.html?id="+datos[i].id+"'>Editar</td><td><a href='javascript:borrar("+datos[i].id+")'>Borrar</a></td></tr>";
			}
			
			html += "</table>";
			
			document.getElementById("resultados").innerHTML = html;
		}
		
		window.onload = function(){
			llamada();
		}
		
		
	</script>
</head>
<body>
   
    <div id="container">

        <header>
            <h1><img width="150" alt="Logo de ArsedDex" src="img/LOGO3.png" /></h1>
        </header>

        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="login.html">Acceder</a></li>
                <li><a href="arboles.html">Lista</a></li>
            </ul>
        </nav>
       
        <div id=resultados>
			
		</div>

    
</body>
</html>